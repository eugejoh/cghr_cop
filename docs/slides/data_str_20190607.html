<!DOCTYPE html>
<html>
  <head>
    <title>data_str_20190606.utf8.md</title>
    <meta charset="utf-8">
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/countdown-0.3.3/countdown.css" rel="stylesheet" />
    <script src="libs/countdown-0.3.3/countdown.js"></script>
    <link rel="stylesheet" href="my-theme.css" type="text/css" />
    <link rel="stylesheet" href="https:\\cdnjs.cloudflare.com\ajax\libs\animate.css\3.7.0\animate.min.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">



name: title_slide
class: middle, title-slide, animated, fadeIn, faster, left
&lt;link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"&gt;

&lt;div class="my-footer"&gt;&lt;/div&gt;

# Data Import and Cleaning in R
&lt;br&gt;
### .title-font[R Community of Practice]
#### .title-font[Centre for Global Health Research]
&lt;br&gt;
.title-font[.red[**&lt;i&gt;June 7th 2019&lt;/i&gt;**]]
&lt;br&gt;
&lt;br&gt;
#### .title-font[.large[Eugene Joh]]

&lt;h4&gt;&lt;i class="fab fa-github fa-lg"&gt;&lt;/i&gt; .title-font[&amp;nbsp;@eugejoh]&lt;/h4&gt;
&lt;h4&gt;&lt;i class="fab fa-twitter fa-lg"&gt;&lt;/i&gt; .title-font[&amp;nbsp;@CGHR_org]&lt;/h4&gt;  

???

---
name: intro
class: animated, fadeIn, faster


.pull-left[
## Today's Session
&lt;br&gt;
### Outline: 

{{content}}
]

--

 - Data Structures (5 minutes)  
 - Interactive Tutorial (40-45 minutes)  
 - Useful Resources (5 minutes)  
 
{{content}}
--
&lt;br&gt;

### Learning Objectives:
{{content}}

--
 1. Describe R data types and data structures  
 2. Import CSV files into R  
 3. Perform basic data cleaning using R  

--

.pull-right[
&lt;br&gt;
&lt;br&gt;
&lt;center&gt;

&lt;/center&gt;
]

---
name: data structures
class: animated, fadeIn, faster, title-slide, inverse, middle

# Data Types and Structures


---
class: animated, fadeIn, faster

&lt;br&gt;
.pull-left[
### Data Types:
 - Numeric  
 - Integer  
 - Character  
 - Logical  
 - Factor*

.small[*technically an attribute]
{{content}}
]

--


```r
dbl_var &lt;- c(1, 2.5, 4.5)
# L suffix = an integer rather than a double
int_var &lt;- c(1L, 6L, 10L)
# TRUE and FALSE (or T and F)
log_var &lt;- c(TRUE, FALSE, T, F)
chr_var &lt;- c("these are", "some strings")

# examples taken from Advanced R book
```
{{content}}

--

--

.pull-right[
### Data Structures:
![](img/data_str.png)

.small[*Information on selecting elements see [Advanced R: Subsetting](http://adv-r.had.co.nz/Subsetting.html)*]
]

---
name: interactive_tutorial
class: animated, fadeIn, faster, title-slide, inverse, middle

# Interactive Tutorial

---
name: tut_getting_started
class: animated, fadeIn, faster

## Getting Started
&lt;br&gt;

--
 1. Find a friend for this session  

--

 2. R and RStudio are installed and working, if not...  
 
   - Download R: [http://www.r-project.org/](http://www.r-project.org/)  
   - Download RStudio, the R IDE: [http://www.rstudio.com/](http://www.rstudio.com/)

--

 3. Download zip file with material (R Project folder)  
   - Link: [http://bit.ly/2XcH8Ac](http://bit.ly/2XcH8Ac) *remember where you saved it!*  

--

 4. Unzip the file and open the project either by...
   - Open the `.Rproj` file
   - Click *Open Project* in top-right corner of RStudio   

---
name: openR
class: animated, zoomIn, faster, title-slide, inverse, middle

# Let's Get Started!



---
name: start
class: animated, fadeIn, faster

## Open RStudio
&lt;br&gt;
#### Steps:  
 1. Identify the four IDE Panels  
 2. Browse `messy_data_tutorial` project folder  
 3. Create a new R script and save it in the project folder  

&lt;br&gt;


---
name: data_import
class: animated, fadeIn, faster

## Data Import
&lt;br&gt;
#### Steps:  
 1. Load packages  
 2. Identify file path for data (.csv files)  
 3. Import the .csv files into R  
 4. Assign imported .csv files as `data1`, `data2`, `data3`  
 5. View content in data frames

--
&lt;br&gt;
&lt;br&gt;

#### Useful Functions:  
 - `library()`
 - `list.files()`, `getwd()`, `here()`  
 - `read_csv()`, `read_delim()`  
 - `head()`, `tail()`, `glimpse()`, `summary()`  

---
name: tasks
class: animated, fadeIn, faster

.pull-left[
## Interactive Coding
&lt;br&gt;

{{content}}

]

--

#### Format:

 - **Example** of a task using `data1.csv`  

 - **Your turn** to apply similar task on `data2.csv`  

 - Try a function -&gt; run the code -&gt; see the output  
 
{{content}}
--

&lt;br&gt;

#### Tips:

 - Use &lt;b&gt;Google, StackOverflow, Forums, etc.&lt;/b&gt;  
 
 - Use `?` or `??` in the console to open &lt;b&gt;R Documentation&lt;/b&gt;  
 
{{content}}
--

--

.pull-right[
&lt;br&gt;
&lt;center&gt;
&lt;img src="img/orly.jpg" width="400px" /&gt;
&lt;/center&gt;

]

---
name: task1
class: animated, fadeIn, faster, middle

## Task 1:
&lt;br&gt;
#### Convert `age` to an integer type as a new variable `age_int`
&lt;br&gt;

<div class="countdown" id="timer_5cf7e99d" style="right:0;bottom:0;left:0;margin:5%;padding:15px;font-size:2em;" data-audio="true" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
name: task2
class: animated, fadeIn, faster, middle

## Task 2:
&lt;br&gt;
#### Keep all observations when there is a missing value for `immune_status`
&lt;br&gt;

<div class="countdown" id="timer_5cf7eb31" style="right:0;bottom:0;left:0;margin:5%;padding:15px;font-size:2em;" data-audio="true" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
name: task3
class: animated, fadeIn, faster, middle

## Task 3:
&lt;br&gt;
#### Separate `area` into new variables called `location` and `city`
&lt;br&gt;

<div class="countdown" id="timer_5cf7e895" style="right:0;bottom:0;left:0;margin:5%;padding:15px;font-size:2em;" data-audio="true" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>


---
name: task4
class: animated, fadeIn, faster, middle

## Task 4:
&lt;br&gt;
#### Create a binary variable for `5-9` and Not `5-9` age groups 
&lt;br&gt;

<div class="countdown" id="timer_5cf7e8f3" style="right:0;bottom:0;left:0;margin:5%;padding:15px;font-size:2em;" data-audio="true" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">04</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
name: task5
class: animated, fadeIn, faster, middle

## Task 5:
&lt;br&gt;
#### Standardize sex variable to `male` and `female` .small[ *hint: use `case_when()`*]
&lt;br&gt;

<div class="countdown" id="timer_5cf7e87d" style="right:0;bottom:0;left:0;margin:5%;padding:15px;font-size:2em;" data-audio="true" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
name: task5
class: animated, fadeIn, faster, middle
exclude: no

## Comprehensive Exercise:
&lt;br&gt;
#### 1. Create a new numeric variable for the serum IgM value  
#### 2. Separate units (mg, dL) into two new variables (numerator, denominator)  
#### 3. Create categorical variable for low/high serum IgM (high is greater or equal to 200mg/dL)  
&lt;br&gt;

<div class="countdown" id="timer_5cf7ea41" style="right:0;bottom:0;left:0;margin:5%;padding:15px;font-size:2em;" data-audio="true" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
name: resources
class: animated, fadeIn, faster, title-slide, inverse, middle

# Resources 

---
name: resources
class: animated, fadeIn, faster
exclude: false

## Data Types and Data Structures
&lt;br&gt;

.pull-left[
#### Starting Points:
 - [Base R Cheatsheet (p. 2)](https://www.rstudio.com/wp-content/uploads/2016/05/base-r.pdf)  
 - [R for Data Science: Vectors Chapter](https://r4ds.had.co.nz/vectors.html)  
&lt;br&gt;
&lt;center&gt;
&lt;img src="https://d33wubrfki0l68.cloudfront.net/b88ef926a004b0fce72b2526b0b5c4413666a4cb/24a30/cover.png" width="220px" /&gt;

&lt;/center&gt;
]

.pull-right[
#### Deeper Dive:
 - [Software Carpentry R Website](https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/)  
 - [Advanced R: Data Structures Chapter](http://adv-r.had.co.nz/Data-structures.html)   
&lt;br&gt;
&lt;center&gt;
&lt;img src="https://d33wubrfki0l68.cloudfront.net/565916198b0be51bf88b36f94b80c7ea67cafe7c/7f70b/cover.png" width="220px" /&gt;
&lt;/center&gt;
]

---
name: data_import
class: animated, fadeIn, faster
exclude: false

## Data Import Packages
&lt;br&gt;
.pull-left[
#### Delimited Text:
 - `readr` [package](https://readr.tidyverse.org/) 
 - `fread()` from [`data.table` package](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html)  


#### Excel:
 - `readxl` [package](https://readxl.tidyverse.org/)  
 - `xlsx` [package](http://www.sthda.com/english/wiki/r-xlsx-package-a-quick-start-guide-to-manipulate-excel-files-in-r)  
 - `openxlsx` [package](https://cran.r-project.org/web/packages/openxlsx/index.html)

 
#### SAS, SPSS, Stata, Minitab:
 - `haven` [package](https://haven.tidyverse.org/)  
 - `foreign` [package](https://cran.r-project.org/web/packages/foreign/index.html)  
]

.pull-right[

#### Databases (PostgreSQL, MySQL):
 - `DBI` [package](https://db.rstudio.com/dbi/)  
 - `Rpostgres` [package](https://github.com/r-dbi/RPostgres)  
 - `RMySql` [package](https://cran.r-project.org/web/packages/RMySQL/index.html)  
 - `RMariaDB` [package](https://cran.r-project.org/web/packages/RMariaDB/index.html)  
 
&lt;br&gt;

&lt;img src="img/import.png" width="500px" style="display: block; margin: auto 0 auto auto;" /&gt;
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": false,
"ratio": "16:9",
"countIncrementalSlides": false,
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
